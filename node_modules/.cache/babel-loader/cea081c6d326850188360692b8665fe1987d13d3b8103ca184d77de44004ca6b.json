{"ast":null,"code":"import { ROLES } from '../constants';\nimport { AUTH_ACTIONS } from '../constants/AuthActions';\nexport const auth_reducer = (state, action) => {\n  var _action$payload, _action$payload$user, _action$payload2, _action$payload2$user;\n  switch (action.type) {\n    case AUTH_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        isLoading: true\n      };\n    case AUTH_ACTIONS.AUTHORIZE:\n      const token = (action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : (_action$payload$user = _action$payload.user) === null || _action$payload$user === void 0 ? void 0 : _action$payload$user.token) || (state === null || state === void 0 ? void 0 : state.token);\n      const role = action !== null && action !== void 0 && (_action$payload2 = action.payload) !== null && _action$payload2 !== void 0 && (_action$payload2$user = _action$payload2.user) !== null && _action$payload2$user !== void 0 && _action$payload2$user.isAdmin ? ROLES.ADMIN : ROLES.USER;\n      localStorage.setItem('token', token);\n      localStorage.setItem('role', role);\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n      return {\n        ...state,\n        isAuth: true,\n        user: action.payload.user,\n        token: token,\n        role: role,\n        error: null,\n        isLoading: false\n      };\n    case AUTH_ACTIONS.LOGOUT:\n      localStorage.removeItem('token');\n      localStorage.removeItem('role');\n      localStorage.removeItem('user');\n      return {\n        ...state,\n        isAuth: false,\n        user: null,\n        token: null,\n        role: ROLES.GUEST,\n        error: null,\n        isLoading: false\n      };\n    case AUTH_ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        isLoading: false\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ROLES","AUTH_ACTIONS","auth_reducer","state","action","_action$payload","_action$payload$user","_action$payload2","_action$payload2$user","type","SET_LOADING","isLoading","AUTHORIZE","token","payload","user","role","isAdmin","ADMIN","USER","localStorage","setItem","JSON","stringify","isAuth","error","LOGOUT","removeItem","GUEST","SET_ERROR"],"sources":["/home/salman/APPS/Tasks/gsg-tt9-gamers-website/src/reducer/AuthReducer.jsx"],"sourcesContent":["import { ROLES } from '../constants';\nimport { AUTH_ACTIONS } from '../constants/AuthActions';\n\nexport const auth_reducer = (state, action) => {\n  switch (action.type) {\n    case AUTH_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        isLoading: true,\n      };\n\n    case AUTH_ACTIONS.AUTHORIZE:\n      const token = action?.payload?.user?.token || state?.token;\n      const role = action?.payload?.user?.isAdmin ? ROLES.ADMIN : ROLES.USER;\n      localStorage.setItem('token', token);\n      localStorage.setItem('role', role);\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n\n      return {\n        ...state,\n        isAuth: true,\n        user: action.payload.user,\n        token: token,\n        role: role,\n        error: null,\n        isLoading: false,\n      };\n\n    case AUTH_ACTIONS.LOGOUT:\n      localStorage.removeItem('token');\n      localStorage.removeItem('role');\n      localStorage.removeItem('user');\n      return {\n        ...state,\n        isAuth: false,\n        user: null,\n        token: null,\n        role: ROLES.GUEST,\n        error: null,\n        isLoading: false,\n      };\n\n    case AUTH_ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        isLoading: false,\n      };\n\n    default:\n      return state;\n  }\n};\n"],"mappings":"AAAA,SAASA,KAAK,QAAQ,cAAc;AACpC,SAASC,YAAY,QAAQ,0BAA0B;AAEvD,OAAO,MAAMC,YAAY,GAAGA,CAACC,KAAK,EAAEC,MAAM,KAAK;EAAA,IAAAC,eAAA,EAAAC,oBAAA,EAAAC,gBAAA,EAAAC,qBAAA;EAC7C,QAAQJ,MAAM,CAACK,IAAI;IACjB,KAAKR,YAAY,CAACS,WAAW;MAC3B,OAAO;QACL,GAAGP,KAAK;QACRQ,SAAS,EAAE;MACb,CAAC;IAEH,KAAKV,YAAY,CAACW,SAAS;MACzB,MAAMC,KAAK,GAAG,CAAAT,MAAM,aAANA,MAAM,wBAAAC,eAAA,GAAND,MAAM,CAAEU,OAAO,cAAAT,eAAA,wBAAAC,oBAAA,GAAfD,eAAA,CAAiBU,IAAI,cAAAT,oBAAA,uBAArBA,oBAAA,CAAuBO,KAAK,MAAIV,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEU,KAAK;MAC1D,MAAMG,IAAI,GAAGZ,MAAM,aAANA,MAAM,gBAAAG,gBAAA,GAANH,MAAM,CAAEU,OAAO,cAAAP,gBAAA,gBAAAC,qBAAA,GAAfD,gBAAA,CAAiBQ,IAAI,cAAAP,qBAAA,eAArBA,qBAAA,CAAuBS,OAAO,GAAGjB,KAAK,CAACkB,KAAK,GAAGlB,KAAK,CAACmB,IAAI;MACtEC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAER,KAAK,CAAC;MACpCO,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEL,IAAI,CAAC;MAClCI,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACnB,MAAM,CAACU,OAAO,CAACC,IAAI,CAAC,CAAC;MAEjE,OAAO;QACL,GAAGZ,KAAK;QACRqB,MAAM,EAAE,IAAI;QACZT,IAAI,EAAEX,MAAM,CAACU,OAAO,CAACC,IAAI;QACzBF,KAAK,EAAEA,KAAK;QACZG,IAAI,EAAEA,IAAI;QACVS,KAAK,EAAE,IAAI;QACXd,SAAS,EAAE;MACb,CAAC;IAEH,KAAKV,YAAY,CAACyB,MAAM;MACtBN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;MAChCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC;MAC/BP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC;MAC/B,OAAO;QACL,GAAGxB,KAAK;QACRqB,MAAM,EAAE,KAAK;QACbT,IAAI,EAAE,IAAI;QACVF,KAAK,EAAE,IAAI;QACXG,IAAI,EAAEhB,KAAK,CAAC4B,KAAK;QACjBH,KAAK,EAAE,IAAI;QACXd,SAAS,EAAE;MACb,CAAC;IAEH,KAAKV,YAAY,CAAC4B,SAAS;MACzB,OAAO;QACL,GAAG1B,KAAK;QACRsB,KAAK,EAAErB,MAAM,CAACU,OAAO;QACrBH,SAAS,EAAE;MACb,CAAC;IAEH;MACE,OAAOR,KAAK;EAChB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}