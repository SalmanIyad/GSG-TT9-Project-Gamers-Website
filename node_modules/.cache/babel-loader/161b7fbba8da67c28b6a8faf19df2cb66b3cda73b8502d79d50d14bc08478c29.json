{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useReducer } from 'react';\nimport { ROLES } from '../constants';\nimport { auth_reducer } from '../reducer/AuthReducer';\nimport { AUTH_ACTIONS } from '../constants/AuthActions';\nimport axios from 'axios';\nimport { AUTH_API } from '../config/api';\nimport { AUTH_API_ENDPOINT } from '../router/pathes';\nconst initialState = {\n  isAuth: false,\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  token: localStorage.getItem('token') || null,\n  role: localStorage.getItem('role') || ROLES.GUEST,\n  error: null,\n  isLoading: false\n};\nconst useAuth = () => {\n  _s();\n  const [state, dispatch] = useReducer(auth_reducer, initialState);\n  const token = state.token || localStorage.getItem('token');\n  const config = {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  };\n  const login = async body => {\n    dispatch({\n      type: AUTH_ACTIONS.SET_LOADING\n    });\n    try {\n      const {\n        data\n      } = await axios.post(AUTH_API + AUTH_API_ENDPOINT.LOGIN, body);\n      console.log(data);\n      dispatch({\n        type: AUTH_ACTIONS.AUTHORIZE,\n        payload: {\n          user: data\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: AUTH_ACTIONS.SET_ERROR,\n        payload: error.message\n      });\n    }\n  };\n  const signup = async body => {\n    dispatch({\n      type: AUTH_ACTIONS.SET_LOADING\n    });\n    try {\n      const {\n        data\n      } = await axios.post(AUTH_API + AUTH_API_ENDPOINT.SIGNUP, body);\n      dispatch({\n        type: AUTH_ACTIONS.AUTHORIZE,\n        payload: {\n          user: data\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: AUTH_ACTIONS.SET_ERROR,\n        payload: error.message\n      });\n    }\n  };\n  const logout = () => {\n    dispatch({\n      type: AUTH_ACTIONS.LOGOUT\n    });\n  };\n  const getProfileData = async () => {\n    dispatch({\n      type: AUTH_ACTIONS.SET_LOADING\n    });\n    try {\n      const {\n        data\n      } = await axios.get(AUTH_API + AUTH_API_ENDPOINT.PROFILE, config);\n      dispatch({\n        type: AUTH_ACTIONS.AUTHORIZE,\n        payload: {\n          user: data\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: AUTH_ACTIONS.SET_ERROR,\n        payload: error.message\n      });\n    }\n  };\n  return {\n    ...state,\n    login,\n    signup,\n    logout,\n    getProfileData\n  };\n};\n_s(useAuth, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");\nexport default useAuth;","map":{"version":3,"names":["useReducer","ROLES","auth_reducer","AUTH_ACTIONS","axios","AUTH_API","AUTH_API_ENDPOINT","initialState","isAuth","user","JSON","parse","localStorage","getItem","token","role","GUEST","error","isLoading","useAuth","_s","state","dispatch","config","headers","Authorization","login","body","type","SET_LOADING","data","post","LOGIN","console","log","AUTHORIZE","payload","SET_ERROR","message","signup","SIGNUP","logout","LOGOUT","getProfileData","get","PROFILE"],"sources":["/home/salman/APPS/Tasks/gsg-tt9-gamers-website/src/hooks/useAuth.jsx"],"sourcesContent":["import { useReducer } from 'react';\nimport { ROLES } from '../constants';\nimport { auth_reducer } from '../reducer/AuthReducer';\nimport { AUTH_ACTIONS } from '../constants/AuthActions';\nimport axios from 'axios';\nimport { AUTH_API } from '../config/api';\nimport { AUTH_API_ENDPOINT } from '../router/pathes';\n\nconst initialState = {\n  isAuth: false,\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  token: localStorage.getItem('token') || null,\n  role: localStorage.getItem('role') || ROLES.GUEST,\n  error: null,\n  isLoading: false,\n};\n\nconst useAuth = () => {\n  const [state, dispatch] = useReducer(auth_reducer, initialState);\n  const token = state.token || localStorage.getItem('token');\n\n  const config = {\n    headers: { Authorization: `Bearer ${token}` },\n  };\n\n  const login = async (body) => {\n    dispatch({ type: AUTH_ACTIONS.SET_LOADING });\n    try {\n      const { data } = await axios.post(\n        AUTH_API + AUTH_API_ENDPOINT.LOGIN,\n        body\n      );\n      console.log(data);\n      dispatch({ type: AUTH_ACTIONS.AUTHORIZE, payload: { user: data } });\n    } catch (error) {\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: error.message });\n    }\n  };\n\n  const signup = async (body) => {\n    dispatch({ type: AUTH_ACTIONS.SET_LOADING });\n    try {\n      const { data } = await axios.post(\n        AUTH_API + AUTH_API_ENDPOINT.SIGNUP,\n        body\n      );\n      dispatch({ type: AUTH_ACTIONS.AUTHORIZE, payload: { user: data } });\n    } catch (error) {\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: error.message });\n    }\n  };\n\n  const logout = () => {\n    dispatch({ type: AUTH_ACTIONS.LOGOUT });\n  };\n\n  const getProfileData = async () => {\n    dispatch({ type: AUTH_ACTIONS.SET_LOADING });\n    try {\n      const { data } = await axios.get(\n        AUTH_API + AUTH_API_ENDPOINT.PROFILE,\n        config\n      );\n      dispatch({ type: AUTH_ACTIONS.AUTHORIZE, payload: { user: data } });\n    } catch (error) {\n      dispatch({ type: AUTH_ACTIONS.SET_ERROR, payload: error.message });\n    }\n  };\n  return {\n    ...state,\n    login,\n    signup,\n    logout,\n    getProfileData,\n  };\n};\n\nexport default useAuth;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}